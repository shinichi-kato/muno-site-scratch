---
title: "夢の話ボット"
color: "secondary"
updated: "2022-07-29T12:00Z"
featuredImage: "./cascade.jpg"
tags: 
    - "Tag Decoder"
---

ワンパターンでない豊かな返答をチャットボットができるようにするため、人間があらゆる回答を辞書に書き込むのは現実的ではありません。
そこでログやコーパスを自動的に辞書化することを考えます。

* ログをそのまま使う→ログ型
* ログを分解してマルコフ連鎖にする→マルコフ連鎖型
* さらにマルコフ連鎖になったノードを観察して人間がそれをふくらませる
* マルコフ連鎖で何をきっかけに任意のマルコフ連鎖がスタートするのかを決めるのは難しいが、「夢の話」「お告げ」「占い」などの体であればおもしろい
* 小説を使う場合は地の文と発言「」を分離してそれぞれ別のマルコフ連鎖にする→スタックのあるマルコフ連鎖
* 意味で区切るマルコフ連鎖やngramを考える



辞書に書き込んだチャットボットのセリフは同じものが何度か現れるとすぐに飽きてきます。
とはいえ辞書に大量のセリフを書き込むことは辞書製作者にとっても結構大変な作業です。これらを回避しつつ豊かな発話をさせるにはどうしたらいいでしょうか。
その一つの解決策がタグを利用したテキスト生成です。

## タグを展開するエンコーダ
例えば辞書に以下のような記述をします。

```
in:[
    "{animal}"
],
out:[
    "犬","猫","イルカ","アゲハチョウ","恐竜"
],
in:[
    "好きな動物は？"
],
out:[
    "{animal}が好きだよ"
]
```

ここでinやoutのなかで`{animal}`と書かれている部分をタグと呼びます。outの文字列にタグが含まれたらinの中に同じタグを見つけて、その中からランダムに一つを使います。
これにより、「`{animal}`が好きだよ」という辞書の文字列は「犬が好きだよ」「猫が好きだよ」・・・としてユーザへの返答になります。

この処理をするためには
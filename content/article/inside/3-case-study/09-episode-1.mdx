---
title: "物語ボット"
color: "secondary"
updated: "2023-01-18T12:00Z"
featuredImage: "./cat_story.jpg"
tags: 
    - "Query Encoder"
    - "Query Processor"
    - "Tag Decoder"
---

 **本ページは現在推敲中です**


## ログを使ったチャットボット

ログ型のチャットボットはチャットログを辞書に変換して会話に用いるチャットボットです。
例えば以下のようなログがあったとき

```
1 A: 山田さんのライブ、良かったね。
2 B: また行きたいですね。
3 A: その後で行った飲み屋も楽しかった！
4 B: 先輩、酔っ払って大変だったんですよ！
5 A: え・・・
```

1行目の「山田さんのライブ、良かったね。」がIN、2行目の「また行きたいですね。」をOUTにする。
2行目の「また行きたいですね」がIN、3行目の「その後で行った飲み屋も楽しかった!」をOUTにする、というように繰り返します。
つまりn行目をIN、n+1行目をOUTにするという変換でできた辞書を使う辞書型チャットボットをログ型チャットボットと呼ぶことができます。

ログ型チャットボットに与えるログとしてユーザがメンバーに入っているチャットログを用いると、いわゆる「仲間内トーク」になります。
このログはチャットルームを運用していれば比較的容易に集めることができ、チャットルームのユーザを限定してあればプライバシーの問題をクリアしやすくなります。
またこのトークはチャットボットとユーザの間に連帯感や愛着を作り出しやすく、自然な返答ができるのでおすすめです。

なお、これまでにSNSのログを用いたチャットボットのたぐいは数多く開発されています。それらでは常にチャットボット爆弾発言問題が起きています。
これはログをそのまま辞書に変換したとき、不適切な発言や誰かを傷つけてしまうような言葉が混入して、あたかもチャットボットがそう主張しているかのように受け取られてしまう、というものです。
現在でもこれを自動的に排除することはできていないので、ログは変換する前に人間がチェックしておくべきでしょう。

### ログの人称代名詞変換

ログにはユーザの発言がそのまま残っているわけですが、口調がチャットボットと必ずしも同じではありません。
そこで、「私」「僕」「あなた」などの人称代名詞はタグ化しておき、発言時にタグを文字列に戻すようにします。

### ログのリフレーミング処理

ログの中に問題になる言葉が含まれていたら、それをリフレーミングするという対処が可能です。
リフレーミングは心理カウンセリングで用いられる技法で、大雑把に言えばネガティブな表現をポジティブなものに言い換えるようにします。

|ネガティブ表現 | ポジティブ表現 |
|--- | --- |
|    |    |

## エピソードを使ったチャットボット

よりストーリー性の強い返答をチャットボットが

『脳科学辞典』の記憶の分類[^1]によれば私達の記憶には様々な種類があり、その中で言語と関連の強い陳述記憶は意味記憶とエピソード記憶に分類されます。

[^1]: [脳科学辞典](https://bsd.neuroinf.jp/wiki/%E8%A8%98%E6%86%B6%E3%81%AE%E5%88%86%E9%A1%9E)

意味記憶は言葉とその意味や概念間の関係を扱っており、辞書型のチャットボットに適しています。
一方でエピソード記憶は物事の経緯や体験などであり、物事自体に加えて誰と、どこで、どう感じたなどの付随的な情報を記憶していることが特徴となっています。
会話の中では何かのきっかけで昔の出来事を思い出してそれをリプレイするといったことはごくありふれたことで、チャットボットでもそれを再現することは興味深いテーマです。 

ユーザのセリフが引き金になってチャットボットが思い出した話を始める、という会話の流れでエピソード、つまりストーリーとして伝えられる話題としてまず思いつくものは「笑った出来事」「昨日あったこと」「観光地での思い出」などでしょう。
笑った出来事を聞けばそのキャラクタの笑いのツボが分かります。笑い以外にも悲しい、楽しい、嬉しいなど感情が伴ったエピソードにより、キャラクタの世界観や価値観を伝えることができます。

例えば辞書的な応答で、

> サルは人間と同じくらい複雑な感情を持っています。

と言われるよりも、エピソードとして

> 先月に学校の遠足で行った動物園にサル舎があったんだよ。
> そこで檻にはりついてずっと人間を見ているサルがいて、飼育員さんが教えてくれたんだけど昔担当だった大好きな飼育員さんをずっと探してるんだって。
> サルも人間とおんなじなんだね。

という物語で伝えられたほうが実感が伴い、内容も理解しやすく身近に感じられるようになります。
これらはチャットログを読んで切り出すこともできますし、エピソードを創作することもできます。
エピソード創作は辞書の創作に比べると楽ですが、どんなエピソードにしたらよいか思い浮かばない場合もあります。

はまずチャットボットのキャラクタ設定

